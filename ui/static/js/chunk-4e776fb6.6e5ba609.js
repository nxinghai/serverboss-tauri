(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e776fb6"],{"0259":function(t,e,a){},1227:function(t,e,a){t.exports=a.p+"static/img/avatar.d190014c.jpeg"},"1ae7":function(t,e,a){"use strict";a("d185")},"2d4e":function(t,e,a){},"2fbe":function(t,e,a){"use strict";a("6d2b")},3593:function(t,e,a){"use strict";a("2d4e")},"37ba":function(t,e,a){"use strict";a("8f87")},"3d5f":function(t,e,a){"use strict";a("7c1f")},"42c9":function(t,e,a){"use strict";a("69da")},"44d4":function(t,e,a){t.exports=a.p+"static/img/theme2.d5d436d9.png"},"4ad0":function(t,e,a){"use strict";a("a189")},"52d5":function(t,e,a){},"534c":function(t,e,a){},"69da":function(t,e,a){},"6d2b":function(t,e,a){},"7abe":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"warp-box"},[a("split-pane",{attrs:{split:"vertical","min-width":"100","min-percent":20,"default-percent":20}},[a("template",{slot:"paneL"},[a("div",{staticClass:"left-container"},[a("left-tree",{on:{handleNodeClick:t.handleNodeClick}})],1)]),a("template",{slot:"paneR"},[a("div",{staticClass:"right-container"},[a("right-tabs",{ref:"rightRef"})],1)])],2)],1)},o=[],i=a("19ab"),n=a.n(i),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-tree"},[s("div",{staticClass:"user-box"},[s("div",{staticClass:"user-box_avatar"},[s("el-avatar",{attrs:{size:50,src:a("1227")}})],1),s("div",{staticClass:"user-box_action"},[s("el-dropdown",{on:{command:t.handleCommand}},[s("el-button",{staticStyle:{width:"210px"},attrs:{type:"primary",size:"medium",icon:"el-icon-circle-plus"}},[t._v(" 新建"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{icon:"el-icon-s-platform",command:{flag:"add",value:{}}}},[t._v("新建连接")]),s("el-dropdown-item",{attrs:{icon:"el-icon-folder-opened",command:{flag:"add-folder",value:{}}}},[t._v("新建分组")]),s("el-dropdown-item",{attrs:{icon:"el-icon-setting",command:{flag:"set",value:{}}}},[t._v("设置")])],1)],1)],1)]),s("div",{staticClass:"tree-box"},[s("el-scrollbar",{staticClass:"tree-box_scroll"},[s("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loadings.loading,expression:"data.loadings.loading"}],ref:"treeRef",staticStyle:{"background-color":"rgb(245, 247, 250)"},attrs:{props:t.data.defaultProps,accordion:!1,"default-expand-all":"",data:t.data.treeData,"node-key":"id"},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,o=e.data;return s("div",{staticClass:"custom-tree-node"},[s("span",{staticClass:"custom-tree-node_icon"},[s("i",{class:["icon-color",0===~~o.type?"el-icon-folder":"el-icon-s-platform blue"]})]),s("span",{staticClass:"custom-tree-node-label",attrs:{title:a.label}},[t._v(t._s(a.label))]),0===~~o.type?s("el-dropdown",{attrs:{size:"medium"},on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("i",{staticClass:"el-icon-more"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[[s("el-dropdown-item",{attrs:{command:{flag:"edit-folder",value:a}}},[s("i",{staticClass:"el-icon-edit-outline",staticStyle:{color:"#13ce66"}}),t._v(" 编辑 ")]),s("el-dropdown-item",{attrs:{command:{flag:"delete-folder",value:a}}},[s("i",{staticClass:"el-icon-folder-remove",staticStyle:{color:"red"}}),t._v(" 删除 ")])]],2)],1):s("el-dropdown",{attrs:{size:"medium",placement:"bottom-end"},on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("i",{staticClass:"el-icon-more"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[[s("el-dropdown-item",{attrs:{command:{flag:"shell",value:a}}},[s("i",{staticClass:"el-icon-full-screen",staticStyle:{color:"#303133"}}),t._v(" 终端")]),s("el-dropdown-item",{attrs:{command:{flag:"file",value:a}}},[s("i",{staticClass:"el-icon-set-up",staticStyle:{color:"#1890ff"}}),t._v(" 文件")]),s("el-dropdown-item",{attrs:{command:{flag:"overview",value:a}}},[s("i",{staticClass:"el-icon-data-line",staticStyle:{color:"#ffba00"}}),t._v(" 监控")]),s("el-dropdown-item",{attrs:{command:{flag:"edit",value:a}}},[s("i",{staticClass:"el-icon-edit-outline",staticStyle:{color:"#13ce66"}}),t._v(" 编辑")]),s("el-dropdown-item",{attrs:{command:{flag:"delete",value:a}}},[s("i",{staticClass:"el-icon-delete",staticStyle:{color:"red"}}),t._v(" 删除")])]],2)],1)],1)}}])})],1)],1),s("div",{staticStyle:{width:"100%",height:"100px","text-align":"center"}},[s("el-progress",{attrs:{type:"circle",percentage:t.data.computerRate,width:90,"stroke-width":8,format:t.formatProgress()}})],1),s("addEditFolder-Dialog",{ref:"addEditFolderDialog",on:{updateList:t.refreshNodeById}}),s("addEdit-Dialog",{ref:"addEditDialog",on:{updateList:t.refreshNodeById}}),s("set-Dialog",{ref:"setDialog",on:{updateList:t.refreshNodeById}})],1)},l=[],c=a("5530"),d=(a("d3b7"),a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog-width",attrs:{title:t.data.title,visible:t.data.visible,"before-close":t.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.data,"visible",e)}}},[a("el-form",{ref:"form",attrs:{model:t.data.form,rules:t.rules,"label-width":"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"连接名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入连接名"},model:{value:t.data.form.name,callback:function(e){t.$set(t.data.form,"name",e)},expression:"data.form.name"}})],1),a("el-form-item",{attrs:{label:"主机IP",prop:"host"}},[a("el-input",{attrs:{placeholder:"请输入主机地址"},model:{value:t.data.form.host,callback:function(e){t.$set(t.data.form,"host",e)},expression:"data.form.host"}})],1),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.data.form.username,callback:function(e){t.$set(t.data.form,"username",e)},expression:"data.form.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.data.form.password,callback:function(e){t.$set(t.data.form,"password",e)},expression:"data.form.password"}})],1),a("el-form-item",{attrs:{label:"端口",prop:"port"}},[a("el-input",{attrs:{placeholder:"请输入端口"},model:{value:t.data.form.port,callback:function(e){t.$set(t.data.form,"port",e)},expression:"data.form.port"}})],1),a("el-form-item",{attrs:{label:"所属分组",prop:"parentId"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择分组"},model:{value:t.data.form.parentId,callback:function(e){t.$set(t.data.form,"parentId",e)},expression:"data.form.parentId"}},t._l(t.data.folderData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.data.testLoading},on:{click:t.testApiFn}},[t._v(" 测试连接 ")]),a("el-button",{attrs:{type:"primary",loading:t.data.btnLoading},on:{click:t.submitDialog}},[t._v(" 保存 ")])],1)],1)}),u=[],p=(a("b0c0"),a("a434"),a("159b"),a("b64b"),a("b775"));function h(t){return Object(p["a"])({url:"/ssh/manage/findTree",method:"get",params:t})}function f(t){return Object(p["a"])({url:"/ssh/manage/add",method:"post",data:t})}function m(t){return Object(p["a"])({url:"/ssh/manage/addFolder",method:"post",data:t})}function g(t){return Object(p["a"])({url:"/ssh/manage/delete",method:"post",data:t})}function b(t){return Object(p["a"])({url:"/ssh/manage/update",method:"post",data:t})}function v(t){return Object(p["a"])({url:"/ssh/manage/updateFolder",method:"post",data:t})}function y(t){return Object(p["a"])({url:"/ssh/manage/testConn",method:"post",data:t})}function w(t){return Object(p["a"])({url:"/sftp/cd",method:"post",data:t})}function x(t){return Object(p["a"])({url:"/sftp/currentInfo",method:"post",data:t})}function k(t){return Object(p["a"])({url:"/sftp/del",method:"post",data:t})}function T(t){return Object(p["a"])({url:"/sftp/download",method:"post",data:t})}function _(t){return Object(p["a"])({url:"/sftp/upload",method:"post",data:t})}function S(t){return Object(p["a"])({url:"/sftp/mkdir",method:"post",data:t})}function O(t){return Object(p["a"])({url:"/sftp/rename",method:"post",data:t})}var D={data:function(){var t=function(t,e,a){""===e?a(new Error("请输入")):a()};return{data:{title:"新建连接",dialogType:"add",btnLoading:!1,testLoading:!1,node:null,visible:!1,folderData:{},form:{name:"",host:"",username:"",password:"",port:"22",parentId:""}},rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],host:[{required:!0,message:"请输入主机IP",trigger:"blur"},{validator:t,trigger:"blur"}],username:[{required:!0,message:"请输入登录用户",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],port:[{required:!0,message:"请输入端口",trigger:"blur"}]}}},methods:{init:function(t){this.data.btnLoading=!1,this.clearDataForm(),this.data.dialogType=t.flag,this.data.node=t.value,this.data.folderData=t.folderData,"edit"===t.flag?(this.data.title="编辑连接",this.data.form.id=t.value.data.id,this.data.form.name=t.value.data.name,this.data.form.host=t.value.data.host,this.data.form.username=t.value.data.username,this.data.form.password=t.value.data.password,this.data.form.port=t.value.data.port,this.data.form.parentId=t.value.data.parentId):(this.data.form.port=22,this.data.title="新建连接"),this.data.visible=!0},submitDialog:function(){var t=this;this.$refs["form"].validate((function(e){t.$nextTick((function(){t.data.btnLoading=!0})),e?"add"===t.data.dialogType?t.addSaveFn():t.editSaveFn():t.$nextTick((function(){t.data.btnLoading=!1}))}))},refreshLazyTree:function(t,e){var a=t.childNodes;a.splice(0,a.length),t.doCreateChildren(e)},addSaveFn:function(){var t=this;f(this.data.form).then((function(){t.$message({type:"success",message:"保存成功!"}),t.$emit("updateList",t.data.node.data)})).catch((function(e){t.$notify.error({title:"错误",message:e.data&&e.data.mesg||e.mesg})})).finally((function(){t.$nextTick((function(){t.data.btnLoading=!1,t.closeDialog()}))}))},editSaveFn:function(){var t=this;b(this.data.form).then((function(){t.$message({type:"success",message:"更新成功!"}),t.$emit("updateList",t.data.node.data)})).catch((function(e){t.$notify.error({title:"错误",message:e.data&&e.data.mesg||e.mesg})})).finally((function(){t.$nextTick((function(){t.data.btnLoading=!1,t.closeDialog()}))}))},testApiFn:function(){var t=this;this.data.testLoading=!0;var e=Object(c["a"])(Object(c["a"])({},this.data.form),{},{parentId:this.data.node&&this.data.node.data&&this.data.node.data.id?this.data.node.data.id:"0"});y(e).then((function(e){t.$message({type:e.data?"success":"error",message:e.data?"连接成功":"连接失败"})})).catch((function(e){t.$notify.error({title:"错误",message:e.data&&e.data.mesg||e.mesg})})).finally((function(){t.$nextTick((function(){t.data.testLoading=!1}))}))},clearDataForm:function(){var t=this;Object.keys(this.data.form).forEach((function(e){return t.data.form[e]=""}))},closeDialog:function(){var t=this;this.data.visible=!1,this.$nextTick((function(){t.$refs["form"].clearValidate()}))}}},C=D,I=a("2877"),F=Object(I["a"])(C,d,u,!1,null,"233b7a08",null),P=F.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog-width",attrs:{title:t.data.title,visible:t.data.visible,"before-close":t.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.data,"visible",e)}}},[a("el-form",{ref:"form",attrs:{model:t.data.form,rules:t.rules,"label-width":"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"组名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.data.form.name,callback:function(e){t.$set(t.data.form,"name",e)},expression:"data.form.name"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v(" 取消 ")]),a("el-button",{attrs:{type:"primary",loading:t.data.btnLoading},on:{click:t.submitDialog}},[t._v(" 保存 ")])],1)],1)},N=[],j={data:function(){return{data:{title:"新建分组",dialogType:"add",btnLoading:!1,node:null,visible:!1,form:{name:"",parentId:0},groups:[]},rules:{name:[{required:!0,message:"请输入",trigger:"blur"}]}}},methods:{init:function(t){this.clearDataForm(),this.data.dialogType=t.flag,this.data.node=t.value,"edit-folder"===t.flag?(this.data.title="编辑分组",this.data.form.name=t.value.data.name):this.data.title="新建分组",this.data.visible=!0},submitDialog:function(){var t=this;this.$refs["form"].validate((function(e){t.$nextTick((function(){t.data.btnLoading=!0})),e?"add-folder"===t.data.dialogType?t.addSaveFn():t.editSaveFn():t.$nextTick((function(){t.data.btnLoading=!1}))}))},refreshLazyTree:function(t,e){var a=t.childNodes;a.splice(0,a.length),t.doCreateChildren(e)},addSaveFn:function(){var t=this,e=Object(c["a"])(Object(c["a"])({},this.data.form),{},{parentId:this.data.node&&this.data.node.data&&this.data.node.data.id?this.data.node.data.id:"0"});m(e).then((function(e){t.$message({type:"success",message:"保存成功!"}),console.log(e),t.$emit("updateList",t.data.node.data?t.data.node.data:{})})).catch((function(e){t.$notify.error({title:"错误",message:e.data&&e.data.mesg||e.mesg})})).finally((function(){t.$nextTick((function(){t.data.btnLoading=!1,t.closeDialog()}))}))},editSaveFn:function(){var t=this,e=Object(c["a"])(Object(c["a"])({},this.data.form),{},{id:this.data.node.data.id,parentId:this.data.node.data.parentId});v(e).then((function(){t.$message({type:"success",message:"更新成功!"}),t.$emit("updateList",t.data.node.data)})).catch((function(e){t.$notify.error({title:"错误",message:e.data&&e.data.mesg||e.mesg})})).finally((function(){t.$nextTick((function(){t.data.btnLoading=!1,t.closeDialog()}))}))},clearDataForm:function(){var t=this;Object.keys(this.data.form).forEach((function(e){return t.data.form[e]=""}))},closeDialog:function(){var t=this;this.data.visible=!1,this.$nextTick((function(){t.$refs["form"].clearValidate()}))}}},E=j,R=Object(I["a"])(E,$,N,!1,null,"19a16aec",null),L=R.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"设置",visible:t.setDialog,width:"900px","append-to-body":""},on:{"update:visible":function(e){t.setDialog=e}}},[s("el-container",{staticStyle:{height:"400px",border:"1px solid #eee"}},[s("el-aside",{staticStyle:{"background-color":"#f9f9f92e"},attrs:{width:"200px"}},[s("el-menu",{attrs:{"default-active":"1"},on:{select:t.handleOpen}},[s("el-menu-item",{attrs:{index:"1"}},[s("i",{staticClass:"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("主题设置")])]),s("el-menu-item",{attrs:{index:"2"}},[s("i",{staticClass:"el-icon-guide"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("代理设置")])]),s("el-menu-item",{attrs:{index:"3",disabled:""}},[s("i",{staticClass:"el-icon-document"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("其他")])])],1)],1),s("el-container",[s("el-main",[1==t.setItem?s("div",[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:12}},[s("span",[s("el-radio",{attrs:{label:"0"},on:{input:t.themeRadio},model:{value:t.themeType,callback:function(e){t.themeType=e},expression:"themeType"}},[t._v("默认")])],1),s("el-image",{staticStyle:{width:"280px",height:"120px"},attrs:{src:a("a85e")}})],1),s("el-col",{attrs:{span:12}},[s("span",[s("el-radio",{attrs:{label:"1"},on:{input:t.themeRadio},model:{value:t.themeType,callback:function(e){t.themeType=e},expression:"themeType"}},[t._v("主题1")])],1),s("el-image",{staticStyle:{width:"280px",height:"120px"},attrs:{src:a("fa6a")}})],1)],1),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:10}},[s("el-col",{attrs:{span:12}},[s("span",[s("el-radio",{attrs:{label:"2"},on:{input:t.themeRadio},model:{value:t.themeType,callback:function(e){t.themeType=e},expression:"themeType"}},[t._v("主题2")])],1),s("el-image",{staticStyle:{width:"280px",height:"120px"},attrs:{src:a("44d4")}})],1),s("el-col",{attrs:{span:12}},[s("span",[s("el-radio",{attrs:{label:"3"},on:{input:t.themeRadio},model:{value:t.themeType,callback:function(e){t.themeType=e},expression:"themeType"}},[t._v("主题3")])],1),s("el-image",{staticStyle:{width:"280px",height:"120px"},attrs:{src:a("dd99")}})],1)],1),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:10}},[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{type:"primary"},on:{click:t.customThemeOpen}},[t._v("自定义")])],1)],1)],1):t._e(),2==t.setItem?s("div",[s("el-form",{ref:"proxyForm",attrs:{model:t.proxyForm,rules:t.proxyRules,"label-width":"100px"}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"代理开关",prop:"enableProxy"}},[s("el-radio-group",{on:{input:t.proxySelect},model:{value:t.proxyForm.enableProxy,callback:function(e){t.$set(t.proxyForm,"enableProxy",e)},expression:"proxyForm.enableProxy"}},[s("el-radio",{attrs:{label:"0"}},[t._v("关闭")]),s("el-radio",{attrs:{label:"1"}},[t._v("开启")])],1)],1)],1)],1),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:10}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"代理地址",prop:"proxyIp"}},[s("el-input",{attrs:{placeholder:"请输入代理IP",disabled:t.isProxy},model:{value:t.proxyForm.proxyIp,callback:function(e){t.$set(t.proxyForm,"proxyIp",e)},expression:"proxyForm.proxyIp"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"端口",prop:"proxyPort"}},[s("el-input",{attrs:{placeholder:"请输入代理端口",disabled:t.isProxy},model:{value:t.proxyForm.proxyPort,callback:function(e){t.$set(t.proxyForm,"proxyPort",e)},expression:"proxyForm.proxyPort"}})],1)],1)],1),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[s("el-input",{attrs:{placeholder:"请输入用户名",disabled:t.isProxy},model:{value:t.proxyForm.userName,callback:function(e){t.$set(t.proxyForm,"userName",e)},expression:"proxyForm.userName"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"密码",prop:"passWord"}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":"",disabled:t.isProxy},model:{value:t.proxyForm.passWord,callback:function(e){t.$set(t.proxyForm,"passWord",e)},expression:"proxyForm.passWord"}})],1)],1)],1),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:24}},[s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",disabled:t.isProxy},on:{click:t.customThemeOpen}},[t._v("保存")])],1)],1)],1)],1):t._e()])],1)],1)],1),s("el-dialog",{attrs:{title:"自定义主题",visible:t.customDialog,width:"400px","append-to-body":""},on:{"update:visible":function(e){t.customDialog=e}}},[s("el-form",{ref:"form",attrs:{model:t.themeForm,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"背景颜色"}},[s("el-color-picker",{model:{value:t.themeForm.background,callback:function(e){t.$set(t.themeForm,"background",e)},expression:"themeForm.background"}})],1),s("el-form-item",{attrs:{label:"字体颜色"}},[s("el-color-picker",{model:{value:t.themeForm.foreground,callback:function(e){t.$set(t.themeForm,"foreground",e)},expression:"themeForm.foreground"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.customThemeSave}},[t._v("保 存")])],1)],1)],1)},U=[],M=a("6186"),V={data:function(){return{themeForm:{},customDialog:!1,themeType:"0",setDialog:!1,setItem:1,proxyForm:{enableProxy:"0"},isProxy:!1,proxyRules:{proxyIp:[{required:!0,message:"代理地址不能为空",trigger:"blur"}],proxyPort:[{required:!0,message:"端口不能为空",trigger:"blur"}]}}},methods:{init:function(t){var e=this;this.setDialog=!0,M["f"]({}).then((function(t){null!=t.data&&(e.themeType=t.data.themeType,e.themeForm.background=t.data.background,e.themeForm.foreground=t.data.foreground)})).finally((function(){}))},customThemeOpen:function(){this.customDialog=!0},customThemeSave:function(){var t=this;M["c"](this.themeForm).then((function(e){t.customDialog=!1,t.$message({type:"success",message:"设置成功!"})})).finally((function(){}))},themeRadio:function(){this.themeForm={},"1"==this.themeType?(this.themeForm.themeType="1",this.themeForm.background="#FFFFFF",this.themeForm.foreground="#000000"):"2"==this.themeType?(this.themeForm.themeType="2",this.themeForm.background="#000000",this.themeForm.foreground="#F1F904"):"3"==this.themeType&&(this.themeForm.themeType="3",this.themeForm.background="#000000",this.themeForm.foreground="#0AF007"),this.customThemeSave()},handleOpen:function(t,e){this.setItem=t},proxySelect:function(){"1"==this.proxyForm.enableProxy?this.isProxy=!0:this.isProxy=!1}}},z=V,B=Object(I["a"])(z,A,U,!1,null,"0bf05d55",null),K=B.exports,J={components:{AddEditFolderDialog:L,AddEditDialog:P,SetDialog:K},data:function(){return{data:{avatarUrl:"https://5b0988e595225.cdn.sohucs.com/images/20170821/59f19df96e5b4e7180b86aae3464faaa.jpeg",treeData:[],folderData:{},computerNum:0,computerRate:0,defaultProps:{children:"children",label:"name",isLeaf:"leaf"},loadings:{loading:!1}},n:{count:0,prev:null,timer:null}}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.data.loadings.loading=!0,h({}).then((function(e){t.data.treeData=e.data&&e.data.length?e.data:[],t.data.folderData=e.data.filter((function(t){return 0===~~t.type})),t.data.computerNum=e.data.filter((function(t){return 1===~~t.type})).length})).finally((function(){t.data.loadings.loading=!1}))},handleNodeClick:function(t){var e=this;if(1===~~t.type){var a=function(t,a,s){e.n.count++,e.n.prev===t[a]&&e.n.count>=2&&s(),e.n.prev=t[a],e.n.timer=setTimeout((function(){e.n.count=0,e.n.prev=null}),300)};a(t,"id",(function(){e.$emit("handleNodeClick",Object(c["a"])(Object(c["a"])({},t),{},{tabtype:"shell"}))}))}},handleBtnAddFn:function(t){this.$refs.addEditFolderDialog.init(t)},refreshNodeById:function(t){console.log(t),this.init()},handleCommand:function(t){switch(t.flag){case"add-folder":this.$refs.addEditFolderDialog.init(t);break;case"edit-folder":this.$refs.addEditFolderDialog.init(t);break;case"delete-folder":this.deleteFn(t);break;case"add":var e=Object(c["a"])(Object(c["a"])({},t),{},{folderData:this.data.folderData});this.$refs.addEditDialog.init(e);break;case"edit":var a=Object(c["a"])(Object(c["a"])({},t),{},{folderData:this.data.folderData});this.$refs.addEditDialog.init(a);break;case"delete":this.deleteFn(t);break;case"shell":1===t.value.data.type&&this.$emit("handleNodeClick",Object(c["a"])(Object(c["a"])({},t.value.data),{},{tabtype:"shell"}));break;case"file":this.$emit("handleNodeClick",Object(c["a"])(Object(c["a"])({},t.value.data),{},{tabtype:"file"}));break;case"overview":this.$emit("handleNodeClick",Object(c["a"])(Object(c["a"])({},t.value.data),{},{tabtype:"overview"}));break;case"set":this.$refs.setDialog.init(t);break}},deleteFn:function(t){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then((function(){g({id:t.value.data.id}).then((function(){e.$message({type:"success",message:"删除成功!"}),e.refreshNodeById(t.value.data)})).catch((function(t){e.$notify.error({title:"删除失败",message:t.data&&t.data.mesg||t.mesg})})).finally((function(){}))})).catch((function(){})).finally((function(){}))},formatProgress:function(){var t=this,e=this.data.computerNum>5?5:this.data.computerNum;return this.data.computerRate=e/5*100,function(){return"机器数："+t.data.computerNum}}}},W=J,G=(a("37ba"),Object(I["a"])(W,r,l,!1,null,"87799b9a",null)),q=G.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-remove":t.removeTab},model:{value:t.activeTabsValue,callback:function(e){t.activeTabsValue=e},expression:"activeTabsValue"}},t._l(t.editableTabs,(function(e){return a("el-tab-pane",{key:e.id,attrs:{label:e.name,name:e.id,closable:!e.id.includes("home")}},[a("span",{attrs:{slot:"label"},slot:"label"},["shell"==e.content.tabtype?a("i",{staticClass:"el-icon-full-screen",staticStyle:{color:"#303133"}}):t._e(),"file"==e.content.tabtype?a("i",{staticClass:"el-icon-set-up",staticStyle:{color:"#1890ff"}}):t._e(),"overview"==e.content.tabtype?a("i",{staticClass:"el-icon-data-line",staticStyle:{color:"#ffba00"}}):t._e(),t._v(" "+t._s(e.name))]),a("div",{directives:[{name:"show",rawName:"v-show",value:"home"===t.activeTabsValue,expression:"activeTabsValue === 'home'"}],staticClass:"content"},[a("IndexShow",{ref:"indexShow",refInFor:!0})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"home"!==t.activeTabsValue,expression:"activeTabsValue !== 'home'"}],staticClass:"content"},["shell"==e.content.tabtype?a("div",{staticClass:"terminal-box"},[e.id&&!e.id.includes("home")?a("xterm-shell",{attrs:{socketURI:e.socketURI,id:e.content.id,data:e},on:{openTab:t.addTab}}):t._e()],1):t._e(),"overview"==e.content.tabtype?a("overview-table",{attrs:{data:e}}):t._e(),"file"==e.content.tabtype?a("upload-file",{ref:"uploadFile",refInFor:!0,attrs:{data:e},on:{openTab:t.addTab}}):t._e()],1)])})),1)],1)},Z=[],Q=(a("99af"),a("caad"),a("2532"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:t.socketURI,staticClass:"xterm",attrs:{id:t.socketURI,"element-loading-text":t.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[a("ShortCut",{attrs:{data:t.shortcutData},on:{openTab:t.openTab}})],1)}),X=[],Y=a("c7eb"),tt=a("1da1"),et=(a("25f0"),a("e9c4"),a("abb2"),a("fcf3")),at=a("47d0");a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("b680"),a("a9e3"),a("bc3a");function st(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.substr(e.lastIndexOf("/")+1)}function ot(t,e){var a=e||200,s=null;return function(){var e=arguments,o=this;s&&clearTimeout(s),s=setTimeout((function(){t.apply(o,e)}),a)}}function it(t){if(!t)return"";var e=1024;return t<e?t+"B":t<Math.pow(e,2)?(t/e).toFixed(2)+"K":t<Math.pow(e,3)?(t/Math.pow(e,2)).toFixed(2)+"M":t<Math.pow(e,4)?(t/Math.pow(e,3)).toFixed(2)+"G":(t/Math.pow(e,4)).toFixed(2)+"T"}function nt(t){var e=t/1e3/60/60/24,a=Math.floor(e),s=t/1e3/60/60-24*a,o=Math.floor(s),i=t/1e3/60-1440*a-60*o,n=Math.floor(i),r=t/1e3-86400*a-3600*o-60*n;r=r.toFixed(2);var l="".concat(a,"天").concat(o,"时").concat(n,"分").concat(r,"秒");return l}var rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-popover",{attrs:{placement:"right",width:"150",trigger:"hover"}},[s("div",[s("el-button",{attrs:{type:"text",icon:"el-icon-share"},on:{click:t.shortShellOpen}},[t._v("快捷方式")]),s("br"),1==t.data.sourceType?s("el-button",{attrs:{type:"text",icon:"el-icon-files"},on:{click:t.shortShell}},[t._v("打开当前目录")]):t._e(),1==t.data.sourceType?s("br"):t._e(),1==t.data.sourceType?s("el-button",{attrs:{type:"text",icon:"el-icon-upload2"},on:{click:t.shortShell}},[t._v("上传文件")]):t._e(),2==t.data.sourceType?s("el-button",{attrs:{type:"text",icon:"el-icon-full-screen"},on:{click:t.openShell}},[t._v("打开终端")]):t._e()],1),s("div",{staticClass:"shortcuts-icon",attrs:{slot:"reference"},slot:"reference"},[s("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:a("b68e")}})],1)]),s("div",[s("el-dialog",{attrs:{title:"快捷方式",visible:t.shortCutsView,width:"700px","append-to-body":""},on:{"update:visible":function(e){t.shortCutsView=e}}},[s("el-row",{attrs:{gutter:20}},[s("el-col",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addShortCutsOpen}},[t._v("增加")])],1)],1),s("el-row",{staticStyle:{"margin-top":"5px"},attrs:{gutter:20}},[s("el-col",[s("el-table",{attrs:{data:t.shellData,border:""}},[s("el-table-column",{attrs:{prop:"columnCode",label:"类型",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.shellType?s("span",[t._v("命令")]):t._e(),2==e.row.shellType?s("span",[t._v("目录")]):t._e()]}}])},[t._v("\\ ")]),s("el-table-column",{attrs:{prop:"shellOrfolder",label:"命令",align:"center","show-overflow-tooltip":!0}}),s("el-table-column",{attrs:{prop:"shellDesc",label:"描述",align:"center","show-overflow-tooltip":!0}}),s("el-table-column",{attrs:{prop:"handle",label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.shellType?s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在终端执行",placement:"top"}},[s("el-button",{attrs:{type:"success",icon:"el-icon-full-screen",circle:""},on:{click:function(a){return t.mommandToShell(e.row)}}})],1):t._e(),2==e.row.shellType?s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"打开目录",placement:"top"}},[s("el-button",{attrs:{type:"success",icon:"el-icon-folder",circle:""},on:{click:function(a){return t.mommandToFile(e.row)}}})],1):t._e(),s("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.updateShortCuts(e.row)}}}),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.delShortCuts(e.row)}}})]}}])})],1)],1)],1)],1),s("el-dialog",{attrs:{title:t.title,visible:t.addShortCutsView,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.addShortCutsView=e}}},[s("el-form",{ref:"shellForm",attrs:{model:t.shellForm,rules:t.shellRules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"类型",prop:"shellType"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.shellForm.shellType,callback:function(e){t.$set(t.shellForm,"shellType",e)},expression:"shellForm.shellType"}},t._l(t.shellTypeOptions,(function(t){return s("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1)],1),s("el-form-item",{attrs:{label:"命令或目录",prop:"shellOrfolder"}},[s("el-input",{attrs:{placeholder:"请输入命令或目录"},model:{value:t.shellForm.shellOrfolder,callback:function(e){t.$set(t.shellForm,"shellOrfolder",e)},expression:"shellForm.shellOrfolder"}})],1),s("el-form-item",{attrs:{label:"描述",prop:"shellDesc"}},[s("el-input",{attrs:{placeholder:"请输入描述"},model:{value:t.shellForm.shellDesc,callback:function(e){t.$set(t.shellForm,"shellDesc",e)},expression:"shellForm.shellDesc"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.addShortCutsSave}},[t._v("保 存")])],1)],1)],1)],1)},lt=[],ct={name:"shortcut",props:{data:{type:Object,default:function(){}}},data:function(){return{title:null,shortCutsView:!1,shellData:null,addShortCutsView:!1,shellForm:{},queryParams:{},shellTypeOptions:[{value:"1",label:"快捷命令"},{value:"2",label:"快捷目录"}],shellRules:{shellType:[{required:!0,message:"类型不能为空",trigger:"blur"}],shellOrfolder:[{required:!0,message:"命令或目录不能为空",trigger:"blur"}]}}},created:function(){},methods:{shortShell:function(){this.$message({type:"success",message:"开发中，马上上线，请关注群内消息"})},shortShellOpen:function(){this.shortCutsView=!0,this.getShortcut()},getShortcut:function(){var t=this;M["e"]({}).then((function(e){null!=e.data&&(t.shellData=e.data)})).finally((function(){}))},addShortCutsOpen:function(){this.addShortCutsView=!0,this.title="增加快捷方式"},addShortCutsSave:function(){var t=this;this.$refs["shellForm"].validate((function(e){e&&(t.shellForm.machineId=t.data.id,M["b"](t.shellForm).then((function(e){t.addShortCutsView=!1,t.getShortcut(),t.$message({type:"success",message:"保存成功!"})})).finally((function(){})))}))},updateShortCuts:function(t){this.shellForm=t,this.addShortCutsView=!0,this.title="修改快捷方式"},delShortCuts:function(t){var e=this;this.$confirm("是否删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return M["d"]({id:t.id})})).then((function(){e.getShortcut(),e.msgSuccess("删除成功")})).catch((function(t){console.log(t)}))},openShell:function(){var t=Object(c["a"])(Object(c["a"])({},this.data),{},{tabtype:"shell"});this.openTab(t)},mommandToShell:function(t){if("1"==this.data.sourceType)this.$parent.sendCommand2(t.shellOrfolder),this.shortCutsView=!1;else{this.shortCutsView=!1,this.data.command=t.shellOrfolder;var e=Object(c["a"])(Object(c["a"])({},this.data),{},{tabtype:"shell"});this.openTab(e)}},mommandToFile:function(t){if("1"==this.data.sourceType){this.shortCutsView=!1,this.data.command=t.shellOrfolder;var e=Object(c["a"])(Object(c["a"])({},this.data),{},{tabtype:"file"});this.openTab(e)}else this.$parent.handleChangePath(t.shellOrfolder),this.shortCutsView=!1},openTab:function(t){this.$emit("openTab",t)}}},dt=ct,ut=(a("8736"),Object(I["a"])(dt,rt,lt,!1,null,"bf260936",null)),pt=ut.exports,ht={name:"XtermShell",props:{id:null,socketURI:{type:String,default:""},data:{type:Object,default:function(){return{socketURI:""}}}},components:{ShortCut:pt},data:function(){return{term:null,fitAddon:null,socket:"",count:0,accessToken:"token",loading:!0,first:!0,loadingText:"初始化……",theme:null,isFirst:!0,shortcutData:{sourceType:"1"}}},created:function(){console.log(this.data),this.shortcutData.id=this.data.content.id,this.shortcutData.name=this.data.content.name},mounted:function(){var t=this;this.getTheme().then((function(e){null!=e.data&&(t.theme={},t.theme.background=e.data.background,t.theme.foreground=e.data.foreground),t.initSocket(),t.onTerminalResize()}))},beforeDestroy:function(){this.socket&&this.socket.close(),this.term&&this.term.dispose(),window.removeEventListener("resize",this.onResize)},methods:{initTerm:function(){null!=this.theme?this.term=new et["Terminal"]({theme:this.theme,cursorBlink:!0}):this.term=new et["Terminal"]({cursorBlink:!0});var t=this.$refs[this.socketURI];this.term.open(t),this.fitAddon=new at["FitAddon"],this.term.loadAddon(this.fitAddon),this.fitAddon.fit(),this.textCopy(),this.term.focus(),this.termOnData()},textCopy:function(){var t=this;this.term.element.addEventListener("contextmenu",function(){var e=Object(tt["a"])(Object(Y["a"])().mark((function e(a){var s,o;return Object(Y["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.preventDefault(),s="",o=window.getSelection().toString(),o&&""!=o){e.next=9;break}return e.next=6,navigator.clipboard.readText();case 6:s=e.sent,e.next=12;break;case 9:return s=o,e.next=12,navigator.clipboard.writeText(o);case 12:s&&""!=s&&(t.socket.send(JSON.stringify({data:JSON.stringify({ctlMsg:s}),type:"ShellCtlMsg"})),t.term.focus());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},initSocket:function(){""!==this.socketURI&&(this.socket=new WebSocket(this.socketURI),this.socketOnOpen(),this.socketOnMessage(),this.socketOnClose(),this.socketOnError(),this.initTerm())},onResize:ot((function(){this.fitAddon.fit(),this.term.scrollToBottom()}),500),termOnData:function(){var t=this;this.term.onData((function(e){t.socket.send(JSON.stringify({data:JSON.stringify({ctlMsg:e}),type:"ShellCtlMsg"}))}))},socketOnMessage:function(){var t=this;this.socket.onmessage=function(e){var a=JSON.parse(e.data);switch(a.type){case"Status":var s=JSON.parse(a.data).sshStatus,o=JSON.parse(a.data).msg;t.loadingText=o,"CONNECTED"===s?(t.loading=!1,t.sendCommand()):"INIT"===s?t.loadingText="初始化……":"CONNECTING"===s?t.loadingText="连接中……":"ERROR"===s?(t.loading=!0,t.loadingText=o):"FINISH"===s?t.$confirm("连接失败，是否重连?","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((function(){t.initSocket()})).catch((function(){t.$message({type:"info",message:"已取消重连"})})):t.socketOnClose();break;case"ShellTerminalMsg":t.term.write(JSON.parse(a.data).msg);break;default:break}}},socketOnOpen:function(){var t=this;this.socket.onopen=function(){t.socket.send(JSON.stringify({data:JSON.stringify({dataId:t.id}),type:"ShellConn"}))}},socketOnClose:function(){},socketOnError:function(){},onTerminalResize:function(){window.addEventListener("resize",this.onResize),this.term.onResize(this.resizeRemoteTerminal)},resizeRemoteTerminal:function(){},getTheme:function(){return Object(tt["a"])(Object(Y["a"])().mark((function t(){return Object(Y["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,M["f"]({});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},sendCommand:function(){this.data.content.command&&this.isFirst&&(this.isFirst=!1,this.socket.send(JSON.stringify({data:JSON.stringify({ctlMsg:this.data.content.command+"\r\n"}),type:"ShellCtlMsg"})))},sendCommand2:function(t){t&&this.socket.send(JSON.stringify({data:JSON.stringify({ctlMsg:t+"\r\n"}),type:"ShellCtlMsg"}))},openTab:function(t){this.$emit("openTab",t)}}},ft=ht,mt=(a("2fbe"),Object(I["a"])(ft,Q,X,!1,null,"55d30c30",null)),gt=mt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingWs,expression:"loadingWs"}],staticClass:"box clearfix",attrs:{"element-loading-text":t.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[a("div",{staticClass:"box_title"},[a("span",[t._v("机器运行时间："),a("i",[a("el-tag",{attrs:{effect:"dark",type:"success"}},[t._v(t._s(t.RUN_TIME))])],1)]),a("span",[t._v("当前连接用户数："),a("i",[a("el-tag",{attrs:{effect:"dark",type:"warning"}},[t._v(t._s(t.USER_SIZE))])],1)])]),a("div",{staticClass:"box_card clearfix"},[a("div",{staticClass:"box_card_item"},[a("el-card",{staticClass:"card",attrs:{shadow:"always"}},[a("span",{staticClass:"header"},[a("i",{staticClass:"el-icon-star-off",staticStyle:{color:"#ffba00"}}),a("span",[t._v("内存")])]),a("el-table",{attrs:{data:t.tableData,border:"",height:"120"}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"80"}}),a("el-table-column",{attrs:{prop:"size",label:"内存大小",width:"80"}}),a("el-table-column",{attrs:{prop:"used",width:"80",label:"已使用"}}),a("el-table-column",{attrs:{prop:"per",label:"使用率"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:t.row.per}})]}}])})],1)],1)],1),a("div",{staticClass:"box_card_item"},[a("el-card",{staticClass:"card",attrs:{shadow:"always"}},[a("span",{staticClass:"header"},[a("i",{staticClass:"el-icon-c-scale-to-original",staticStyle:{color:"#1890ff"}}),a("span",[t._v("硬盘")])]),a("el-table",{attrs:{data:t.tableDataDisk,border:"",height:"120"}},[a("el-table-column",{attrs:{prop:"path",label:"文件系统","show-overflow-tooltip":!0,width:"80"}}),a("el-table-column",{attrs:{prop:"mountPoint",label:"挂载路径","show-overflow-tooltip":!0,width:"80"}}),a("el-table-column",{attrs:{prop:"total",label:"硬盘大小",width:"80"}}),a("el-table-column",{attrs:{prop:"used",width:"60","show-overflow-tooltip":!0,label:"已使用"}}),a("el-table-column",{attrs:{prop:"per",label:"使用率"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:t.row.per}})]}}])})],1)],1)],1),a("div",{staticClass:"box_card_item screen_all"},[a("el-card",{staticClass:"card",attrs:{shadow:"always"}},[a("span",{staticClass:"header"},[a("i",{staticClass:"el-icon-attract",staticStyle:{color:"#13ce66"}}),a("span",[t._v("CPU")])]),a("div",{staticClass:"echarts"},[a("chart-view",{attrs:{chartOption:t.cpuCharts.chartOpt,height:t.cpuCharts.height,"clear-chart":!1,"auto-resize":!0,"play-highlight":t.cpuCharts.playHighlight}})],1)])],1),a("div",{staticClass:"box_card_item screen_all"},[a("el-card",{staticClass:"card",attrs:{shadow:"always"}},[a("span",{staticClass:"header"},[a("i",{staticClass:"el-icon-magic-stick",staticStyle:{color:"red"}}),a("span",[t._v("进程")])]),a("div",{staticClass:"echarts"},t._l(t.progressData,(function(e){return a("el-progress",{key:e.id,attrs:{type:e.type||"circle",percentage:e.percentage,format:t.format.bind(null,e)}})})),1)])],1)])])},vt=[],yt=(a("4e82"),a("d81d"),a("07e6"),a("ef97"),a("0a6d"),{name:"OverviewTable",props:{data:{type:Object,default:function(){return{socketURI:""}}}},data:function(){return{socket:"",loadingText:"初始化……",loadingWs:!0,RUN_TIME:null,USER_SIZE:0,tableData:[],tableDataDisk:[],setChartTimeFlag:!1,cpuCharts:{id:"333",title:"cpu占用率",width:"100%",height:"200px",playHighlight:!1,chartOpt:{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}%"},legend:{textStyle:{color:"#333"},x:"20%",y:"top",data:["cpu运行轨迹"]},calculable:!0,grid:{x:"20%",y:40,x2:65,y2:50,borderWidth:1},xAxis:{type:"category",splitLine:{show:!0},axisLine:{lineStyle:{color:"#90979c"}},axisLabel:{show:!0,interval:"auto",rotate:10,margin:6,textStyle:{color:"#333",fontFamily:"sans-serif",fontSize:10,fontStyle:"italic"}},name:"时间",axisPointer:{type:"shadow"},data:[]},yAxis:[{type:"value",position:"right",name:"单位（%）",splitLine:{show:!0},min:0,max:100,axisLabel:{show:!0,interval:"auto"}}],dataZoom:[{show:!0,realtime:!0,start:0,end:100,height:15,bottom:10}],series:[{name:"CPU状态",type:"gauge",center:["10%","50%"],radius:"80%",min:0,max:100,splitNumber:5,axisLine:{lineStyle:{color:[[.09,"lime"],[.82,"#1e90ff"],[1,"#ff4500"]],width:2,shadowColor:"#eee",shadowBlur:6}},axisLabel:{textStyle:{color:"#333",shadowColor:"#333",shadowBlur:6}},axisTick:{length:8,lineStyle:{color:"auto",shadowColor:"#fff",shadowBlur:6}},splitLine:{length:15,lineStyle:{width:2,color:"#1e90ff",shadowColor:"#eee",shadowBlur:6}},pointer:{shadowColor:"#ccc",shadowBlur:3},title:{textStyle:{fontSize:12,fontStyle:"italic",color:"#333",shadowColor:"#333",shadowBlur:5}},detail:{borderColor:"#333",shadowColor:"#fff",shadowBlur:5,offsetCenter:[0,"90%"],textStyle:{fontWeight:"bolder",color:"#333"},formatter:"{value}%"},data:[{value:0,name:"使用率"}]},{name:"cpu运行轨迹",type:"line",data:[],smooth:!0,boundaryGap:!0,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]},data:[]},progressData:[]}},mounted:function(){this.initSocket()},beforeDestroy:function(){this.socket&&this.socket.close()},methods:{format:function(t,e){return"".concat(t.text,":").concat(t.number)},initSocket:function(){""!==this.data.socketURI&&(this.socket=new WebSocket(this.data.socketURI),this.socketOnOpen(),this.socketOnMessage(),this.socketOnClose(),this.socketOnError())},socketOnMessage:function(){var t=this;this.socket.onmessage=function(e){var a=JSON.parse(e.data);switch(a.type){case"Status":var s=JSON.parse(a.data).sshStatus,o=JSON.parse(a.data).msg;t.loadingText=o,"CONNECTED"===s?t.loadingWs=!1:"INIT"===s?t.loadingText="初始化……":"CONNECTING"===s?t.loadingText="连接中……":"ERROR"===s?(t.loadingWs=!0,t.loadingText=o):"FINISH"===s?t.$confirm("连接失败，是否重连?","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((function(){t.initSocket()})).catch((function(){t.$message({type:"info",message:"已取消重连"})})):t.socketOnClose();break;case"MonitorInfo":var i=JSON.parse(a.data),n=i.info;t.RUN_TIME=nt(1e3*parseFloat(n.RUN_TIME)),t.USER_SIZE=n.USER_SIZE,t.tableData=[{type:"mem",size:n.MEM_TOTAL?it(1024*n.MEM_TOTAL):0,used:n.MEM_USED?it(1024*n.MEM_USED):0,per:n.MEM_USED?1*(n.MEM_USED/n.MEM_TOTAL*100).toFixed(2):0},{type:"swap",size:n.SWAP_TOTAL?it(1024*n.SWAP_TOTAL):0,used:n.SWAP_USED?it(1024*n.SWAP_USED):0,per:n.SWAP_USED?1*(n.SWAP_USED/n.SWAP_TOTAL*100).toFixed(2):0}].sort((function(t,e){return e.per-t.per})),t.tableDataDisk=n.DISK_INFO.length?n.DISK_INFO.map((function(t){return t.per=t.used?1*(t.used/t.total*100).toFixed(2):0,t.total=t.total?it(1024*t.total):0,t.used=t.used?it(1024*t.used):0,t})).sort((function(t,e){return e.per-t.per})):[],t.$set(t.cpuCharts.chartOpt.series[0],"data",[{value:1*n.CPU_US,name:"使用率"}]),t.cpuCharts.chartOpt.xAxis.data.length>100&&(t.cpuCharts.chartOpt.xAxis.data.shift(),t.cpuCharts.chartOpt.series[1].data.shift());var r=new Date;t.cpuCharts.chartOpt.xAxis.data.push(t.getNowTime(r)),t.cpuCharts.chartOpt.series[1].data.push(1*n.CPU_US),t.progressData=[{id:"TASK_TOTAL",type:"circle",taskType:"TASK_TOTAL",percentage:n.TASK_TOTAL?1*(n.TASK_TOTAL/n.TASK_TOTAL*100).toFixed(2):0,number:n.TASK_TOTAL,text:"总进程"},{id:"TASK_RUNNING",type:"circle",taskType:"TASK_RUNNING",percentage:n.TASK_RUNNING?1*(n.TASK_RUNNING/n.TASK_TOTAL*100).toFixed(2):0,number:n.TASK_RUNNING,text:"运⾏中"},{id:"TASK_SLEEPING",type:"circle",taskType:"TASK_SLEEPING",percentage:n.TASK_SLEEPING?1*(n.TASK_SLEEPING/n.TASK_TOTAL*100).toFixed(2):0,number:n.TASK_SLEEPING,text:"休眠"},{id:"TASK_STOPPED",type:"circle",taskType:"TASK_STOPPED",percentage:n.TASK_STOPPED?1*(n.TASK_STOPPED/n.TASK_TOTAL*100).toFixed(2):0,number:n.TASK_STOPPED,text:"停⽌"},{id:"TASK_ZOMBIE",type:"circle",taskType:"TASK_ZOMBIE",percentage:n.TASK_ZOMBIE?1*(n.TASK_ZOMBIE/n.TASK_TOTAL*100).toFixed(2):0,number:n.TASK_ZOMBIE,text:"僵⼫进程"}];break;default:break}}},getNowTime:function(t){var e=t.getHours(),a=t.getMinutes(),s=t.getSeconds();t.getMilliseconds();return e=e<10?"0".concat(e):e,a=a<10?"0".concat(a):a,s=s<10?"0".concat(s):s,e+":"+a+":"+s},getTimeRange:function(){for(var t=new Date,e=[],a=-10;a<=10;a++){var s=new Date(t.getTime()+1e3*a).toLocaleTimeString();e.push(s)}return e},socketOnOpen:function(){var t=this;this.socket.onopen=function(){t.socket.send(JSON.stringify({data:JSON.stringify({dataId:~~t.data.id.split("_")[0]}),type:"MonitorConn"}))}},socketOnClose:function(){this.socket.onclose=function(){}},socketOnError:function(){this.socket.onerror=function(){}}}}),wt=yt,xt=(a("a0c9"),Object(I["a"])(wt,bt,vt,!1,null,"8678223e",null)),kt=xt.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingWs,expression:"loadingWs"}],staticClass:"box",attrs:{"element-loading-text":t.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[a("div",{staticClass:"action"},[a("el-dropdown",{on:{command:t.handleCommand}},[a("el-button",{attrs:{type:"success",icon:"el-icon-edit-outline"}},[t._v(" 操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{icon:"el-icon-upload2",command:{flag:"upload-file"}}},[t._v("上传文件/文件夹")]),a("el-dropdown-item",{attrs:{icon:"el-icon-folder",command:{flag:"add-folder"}}},[t._v("新建文件夹")])],1)],1),a("div",{staticClass:"path-cnt"},[a("div",{staticClass:"tips"},[t._v("当前路径:")]),t.currentPathArr.length?a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.currentPathArr,(function(e,s){return a("el-breadcrumb-item",{key:e,nativeOn:{click:function(a){return t.handleChangePath(e,s,"breadcrumb")}}},[t._v(" "+t._s(e)+" ")])})),1):t._e()],1)],1),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.clientHeightTable,border:""}},[a("el-table-column",{attrs:{prop:"filename",label:"名称",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"custom-name"},[a("el-dropdown",{attrs:{size:"medium"},on:{command:t.handleCommandName}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[[a("el-dropdown-item",{attrs:{command:{flag:"down",row:e.row}}},[a("i",{staticClass:"el-icon-download",staticStyle:{color:"#13ce66"}}),t._v(" 下载 ")]),a("el-dropdown-item",{attrs:{command:{flag:"rename",row:e.row}}},[a("i",{staticClass:"el-icon-edit-outline",staticStyle:{color:"#137dce"}}),t._v(" 重命名 ")]),a("el-dropdown-item",{attrs:{command:{flag:"delete",row:e.row}}},[a("i",{staticClass:"el-icon-folder-remove",staticStyle:{color:"red"}}),t._v(" 删除 ")])]],2)],1),a("span",{staticClass:"name-info",on:{click:function(a){return t.handleCdAndFileName(e.row)}}},[a("i",{class:e.row.isDir?"el-icon-folder icon-color":"el-icon-document"}),t._v(" "+t._s(e.row.filename)+" ")])],1)]}}])}),a("el-table-column",{attrs:{prop:"size",label:"大小"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!=e.row.isDir?a("span",[t._v(t._s(e.row.size))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"permissions",label:"权限"}}),a("el-table-column",{attrs:{prop:"mTime",label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(new Date(e.row.mTime).toLocaleString())+" ")])]}}])}),a("el-table-column",{attrs:{prop:"user",label:"用户"}})],1)],1),a("span",{staticClass:"upload-fixed"},[a("el-popover",{ref:"popoverProcess",attrs:{placement:"right","popper-class":"popperClass",id:"popoverProcess",trigger:"click"}},[a("el-card",{staticClass:"upload-fixed_card",attrs:{shadow:"never"}},[a("span",{staticClass:"header"},[a("span",[t._v("上传/下载")])]),a("el-table",{attrs:{data:t.processData,border:""}},[a("el-table-column",{attrs:{property:"name",label:"名称",width:"100px","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"name"},[a("i",{class:e.row.flag.includes("down")?"el-icon-download download icon-down-color":"el-icon-upload2 upload icon-upload-color"}),t._v(" "+t._s(e.row.name)+" ")])]}}])}),a("el-table-column",{attrs:{property:"process",label:"进度",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"process-box"},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":16,percentage:~~t.row.process,status:"FINISH"===t.row.processStatus?"success":"ERROR"===t.row.processStatus?"exception":null}})],1)]}}])}),a("el-table-column",{attrs:{property:"updateTime",label:"时间",width:"130px"}}),a("el-table-column",{attrs:{property:"processStatus",label:"状态",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s("FINISH"===e.row.processStatus?"完成":"ERROR"===e.row.processStatus?"失败":"进行中")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["ERROR"===e.row.processStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClickRepeat(e.row)}}},[t._v(t._s("重新"+(e.row.flag.includes("down")?"下载":"上传")))]):t._e(),"FINISH"===e.row.processStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClickDel(e.row)}}},[t._v("删除")]):t._e()]}}])})],1)],1),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"el-icon-upload",class:t.processData.length?"":"disabled"})])],1)],1),a("upload-dialog",{ref:"uploadDialog",on:{updateProcessData:t.updateProcessData}}),a("down-dialog",{ref:"downDialog",on:{updateProcessData:t.updateProcessData}}),a("rename-dialog",{ref:"renameDialog",on:{updateProcessData:t.updateProcessData}}),a("ShortCut",{attrs:{data:t.childData},on:{openTab:t.openTab}})],1)},_t=[],St=(a("fb6a"),a("a15b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog-width",attrs:{title:t.data.title,visible:t.data.visible,"before-close":t.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.data,"visible",e)}}},["upload-file"===this.data.dialogType?a("div",{staticClass:"box"},[a("div",{staticClass:"row"},[a("span",{staticClass:"label"},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.data.uploadType,callback:function(e){t.$set(t.data,"uploadType",e)},expression:"data.uploadType"}},t._l(t.data.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("span",{staticClass:"info",on:{click:t.handleGetPath}},[t._v(t._s(t.data.form.srcPath))])]),a("div",{staticClass:"tips"},[t._v("说明：选择文件或者文件夹，如果文件或文件夹在服务器已存在，会自动覆盖")])]):t._e(),"add-folder"===this.data.dialogType?a("div",{staticClass:"box"},[a("div",{staticClass:"row"},[a("span",{staticClass:"label"},[t._v("文件夹名称")]),a("input",{ref:"inputFolder",staticClass:"input",attrs:{placeholder:"请输入"}})])]):t._e(),a("span",{attrs:{slot:"footer"},slot:"footer"},["upload-file"===this.data.dialogType?a("el-button",{attrs:{type:"primary",loading:t.data.btnLoading,disabled:!t.data.form.srcPath},on:{click:t.submitDialog}},[t._v(" 确定上传 ")]):a("el-button",{attrs:{type:"primary",loading:t.data.btnLoading},on:{click:t.submitCreateDialog}},[t._v(" 确定新建 ")])],1)])}),Ot=[],Dt={data:function(){return{data:{title:"上传文件",dialogType:"upload-file",btnLoading:!1,processData:[],visible:!1,form:{cId:"",destPath:"",key:"",srcPath:"",dirName:""},uploadType:"",options:[{value:"1",label:"上传文件"},{value:"2",label:"上传文件夹"}]}}},methods:{init:function(t){this.data.dialogType=t.flag,this.data.title="upload-file"===t.flag?"上传文件":"新建文件夹",this.data.form.cId=t.cId,this.data.form.destPath=t.destPath,this.data.form.key=t.key?t.key:"",this.data.processData=t.processData,this.data.visible=!0},handleGetPath:function(){var t=this;return Object(tt["a"])(Object(Y["a"])().mark((function e(){return Object(Y["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!top.__TAURI__){e.next=6;break}return e.next=3,top.__TAURI__.dialog.open({directory:2===~~t.data.uploadType});case 3:t.data.form.srcPath=e.sent,e.next=7;break;case 6:t.data.form.srcPath="c/aaa.txt";case 7:case"end":return e.stop()}}),e)})))()},submitCreateDialog:function(){var t=this;this.data.btnLoading=!0,this.data.form.dirName=this.$refs.inputFolder.value,S({cId:this.data.form.cId,dirName:this.data.form.dirName}).then((function(e){e.data&&e.data.path?t.$emit("updateProcessData",{currentPath:e.data.path,tableData:e.data.fileInfos,flag:t.data.dialogType}):t.$message({type:"error",message:e.msg})})).catch((function(e){t.$notify.error({title:"错误",message:e.msg})})).finally((function(){t.$nextTick((function(){t.data.btnLoading=!1,t.closeDialog()}))}))},submitDialog:function(){var t=this;this.data.form.srcPath?(this.data.btnLoading=!0,_({cId:this.data.form.cId,destPath:this.data.form.destPath,key:this.data.form.key,srcPath:this.data.form.srcPath}).then((function(e){if(e.data){if(t.data.processData.some((function(t){return t.key.includes(e.data)&&"FINISH"!==t.processStatus})))return void t.$message({type:"warning",message:"该文件/文件夹已经在处理中！"});t.$emit("updateProcessData",Object(c["a"])(Object(c["a"])({},t.data.form),{},{key:e.data,flag:t.data.dialogType})),t.$message({type:"success",message:e.msg})}else t.$message({type:"error",message:e.msg})})).catch((function(e){t.$notify.error({title:"错误",message:e.msg})})).finally((function(){t.$nextTick((function(){t.data.btnLoading=!1,t.closeDialog()}))}))):this.$notify.warn({title:"提示",message:"请先选择上传路径"})},clearDataForm:function(){var t=this;Object.keys(this.data.form).forEach((function(e){return t.data.form[e]=""}))},closeDialog:function(){this.data.visible=!1,this.data.processData=[],this.clearDataForm()}}},Ct=Dt,It=(a("3593"),Object(I["a"])(Ct,St,Ot,!1,null,"137946fa",null)),Ft=It.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog-width",attrs:{title:t.data.title,visible:t.data.visible,"before-close":t.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.data,"visible",e)}}},[a("div",{staticClass:"box"},[a("div",{staticClass:"row"},[a("span",{staticClass:"label"},[t._v("保存路径")]),a("span",{staticClass:"info",on:{click:t.handleGetPath}},[t._v(t._s(t.data.form.srcPath))])])]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:t.data.btnLoading},on:{click:t.submitDialog}},[t._v(" 确定下载 ")])],1)])},$t=[],Nt={data:function(){return{data:{title:"下载",dialogType:!1,btnLoading:!1,processData:[],row:null,visible:!1,form:{cId:"",destPath:"",key:"",srcPath:""}}}},methods:{init:function(t){this.data.dialogType=t.isDir?"down-dir":"down-file",this.data.title=t.isDir?"下载文件夹":"下载文件",this.data.row=t,this.data.form.cId=t.cId,this.data.form.destPath=1===t.destPath.length?t.destPath+t.filename:t.destPath+"/"+t.filename,this.data.form.key=t.key?t.key:"",this.data.processData=t.processData,this.data.visible=!0},handleGetPath:function(){var t=this;return Object(tt["a"])(Object(Y["a"])().mark((function e(){return Object(Y["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!top.__TAURI__){e.next=6;break}return e.next=3,top.__TAURI__.dialog.open({directory:!0});case 3:t.data.form.srcPath=e.sent,e.next=7;break;case 6:t.data.form.srcPath="E:\\shaxiang";case 7:case"end":return e.stop()}}),e)})))()},submitDialog:function(){this.downFileDirFn()},downFileDirFn:function(){var t=this;this.data.form.srcPath?(this.data.btnLoading=!0,T({cId:this.data.form.cId,destPath:this.data.form.srcPath,key:this.data.form.key,srcPath:this.data.form.destPath}).then((function(e){if(e.data){if(t.data.processData.some((function(t){return t.key.includes(e.data)&&"FINISH"!==t.processStatus})))return void t.$message({type:"warning",message:"该文件/文件夹已经在处理中！"});t.$emit("updateProcessData",Object(c["a"])(Object(c["a"])(Object(c["a"])({},t.data.row),t.data.form),{},{key:e.data,flag:t.data.dialogType})),t.$message({type:"success",message:e.msg})}else t.$message({type:"error",message:e.msg})})).catch((function(e){t.$notify.error({title:"错误",message:e.msg})})).finally((function(){t.$nextTick((function(){t.data.btnLoading=!1,t.closeDialog()}))}))):this.$notify.warning({title:"提示",message:"请先选择路径"})},clearDataForm:function(){var t=this;Object.keys(this.data.form).forEach((function(e){return t.data.form[e]=""}))},closeDialog:function(){this.data.visible=!1,this.data.processData=[],this.data.row=null,this.clearDataForm()}}},jt=Nt,Et=(a("1ae7"),Object(I["a"])(jt,Pt,$t,!1,null,"3f489f8e",null)),Rt=Et.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog-width",attrs:{title:t.data.title,visible:t.data.visible,"before-close":t.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.data,"visible",e)}}},[a("div",{staticClass:"box"},[a("div",{staticClass:"row"},[a("span",{staticClass:"label"},[t._v("名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.form.destName,expression:"data.form.destName"}],ref:"inputFolder",staticClass:"input",attrs:{placeholder:"请输入"},domProps:{value:t.data.form.destName},on:{input:function(e){e.target.composing||t.$set(t.data.form,"destName",e.target.value)}}})])]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:t.data.btnLoading},on:{click:t.submitDialog}},[t._v(" 确定修改 ")])],1)])},At=[],Ut={data:function(){return{data:{title:"重命名",dialogType:!1,btnLoading:!1,visible:!1,form:{cId:"",srcName:"",destName:""}}}},methods:{init:function(t){this.data.dialogType=t.flag,this.data.title="重命名",this.data.form.cId=t.cId,this.data.form.srcName=t.filename,this.data.form.destName=t.filename,this.data.visible=!0},submitDialog:function(){var t=this;this.data.btnLoading=!0,O(this.data.form).then((function(e){e.data&&e.data.path?t.$emit("updateProcessData",{currentPath:e.data.path,tableData:e.data.fileInfos,flag:t.data.dialogType}):t.$message({type:"error",message:e.msg})})).catch((function(e){t.$notify.error({title:"错误",message:e.msg})})).finally((function(){t.$nextTick((function(){t.data.btnLoading=!1,t.closeDialog()}))}))},clearDataForm:function(){var t=this;Object.keys(this.data.form).forEach((function(e){return t.data.form[e]=""}))},closeDialog:function(){this.data.visible=!1,this.$refs.inputFolder.value="",this.clearDataForm()}}},Mt=Ut,Vt=(a("a350"),Object(I["a"])(Mt,Lt,At,!1,null,"7ced7364",null)),zt=Vt.exports,Bt={name:"UploadFile",components:{UploadDialog:Ft,DownDialog:Rt,RenameDialog:zt,ShortCut:pt},props:{data:{type:Object,default:function(){return{socketURI:""}}}},data:function(){return{socket:"",loadingText:"初始化……",loadingWs:!0,loading:!0,currentPath:"/",tableData:[],processData:[],childData:{sourceType:"2"},isFirst:!0}},computed:{clientHeightTable:function(){return document.documentElement.clientHeight-145},currentPathArr:function(){return this.childData.command="cd "+this.currentPath,this.currentPath.length?1===this.currentPath.length?[this.currentPath]:this.currentPath.split("/").map((function(t){return t||"/"})):[]},cId:function(){var t=this.data.socketURI?this.data.socketURI.split("ws?")[1].split("=")[1]:"";return t}},mounted:function(){console.log(this.data),this.childData.name=this.data.name,this.childData.id=this.data.content.id,this.initSocket()},beforeDestroy:function(){this.socket&&this.socket.close(),this.$refs.popoverProcess.doClose(),this.processData=[]},methods:{init:function(){var t=this;this.loading=!0,x({cId:this.cId}).then((function(e){e.data&&e.data.path&&(t.currentPath=e.data.path,t.tableData=e.data.fileInfos.map((function(t){return t.size&&(t.size=it(t.size)),t})),t.sendCommand())})).catch((function(e){t.$notify.error({title:"错误",message:e.data&&e.data.msg||e.msg})})).finally((function(){t.loading=!1}))},initSocket:function(){""!==this.data.socketURI&&(this.socket=new WebSocket(this.data.socketURI),this.socketOnOpen(),this.socketOnMessage(),this.socketOnClose(),this.socketOnError())},handleCdAndFileName:ot((function(t){if(t.isDir){var e=this.currentPath.length?1===this.currentPath.length?"/".concat(t.filename):"".concat(this.currentPath,"/").concat(t.filename):"/";this.handleChangePath(e)}else this.$refs.downDialog.init(Object(c["a"])(Object(c["a"])({},t),{},{cId:this.cId,destPath:this.currentPath,processData:this.processData}))}),500),handleChangePath:function(t,e,a){var s=t;if(a){var o=this.currentPathArr.slice(0,e+1).map((function(e){return e.includes("/")&&"/"!=t&&(e=""),e}));s=o.join("/")}this.promiseChangePath(s)},handleCommand:function(t){this.$refs.uploadDialog.init(Object(c["a"])(Object(c["a"])({},t),{},{cId:this.cId,destPath:this.currentPath,processData:this.processData}))},promiseChangePath:function(t){var e=this;this.loading=!0,w({cId:this.cId,path:t}).then((function(t){t.data&&t.data.path?(e.currentPath=t.data.path,e.tableData=t.data.fileInfos.map((function(t){return t.size&&(t.size=it(t.size)),t}))):e.$message({type:"error",message:t.msg})})).catch((function(t){e.$notify.error({title:"错误",message:t.data&&t.data.msg||t.msg})})).finally((function(){e.loading=!1}))},handleCommandName:function(t){switch(t.flag){case"down":this.$refs.downDialog.init(Object(c["a"])(Object(c["a"])({flag:t.flag},t.row),{},{cId:this.cId,destPath:this.currentPath,processData:this.processData}));break;case"rename":this.$refs.renameDialog.init(Object(c["a"])(Object(c["a"])({flag:t.flag},t.row),{},{cId:this.cId,destPath:this.currentPath,processData:this.processData}));break;case"delete":this.deleteFn(t.row);break}},updateProcessData:function(t){switch(t.flag){case"upload-file":var e=t.srcPath.lastIndexOf("/")+1,a=t.srcPath.substring(e);this.processData.push(Object(c["a"])(Object(c["a"])({},t),{},{name:a,updateTime:(new Date).toLocaleString(),process:0}));break;case"add-folder":this.currentPath=t.currentPath,this.tableData=t.tableData;break;case"rename":this.currentPath=t.currentPath,this.tableData=t.tableData;break;default:var s=t.filename.lastIndexOf("/")+1,o=t.filename.substring(s);this.processData.push(Object(c["a"])(Object(c["a"])({},t),{},{name:o,updateTime:(new Date).toLocaleString(),process:0}));break}(t.flag.includes("upload")||t.flag.includes("down"))&&this.$refs.popoverProcess.doShow()},handleClickRepeat:function(t){t.flag.includes("upload")&&this.uploadRepeat(t),t.flag.includes("down")&&this.downRepeat(t)},downRepeat:function(t){var e=this;T({cId:t.cId,destPath:t.srcPath,key:t.key,srcPath:t.destPath}).then((function(a){a.data?(e.processData=e.processData.filter((function(e){return e.key!==t.key})),e.updateProcessData(Object(c["a"])(Object(c["a"])({},t),{},{key:a.data,flag:t.flag})),e.$message({type:"success",message:a.msg})):e.$message({type:"error",message:a.msg})}))},uploadRepeat:function(t){var e=this;_({cId:t.cId,destPath:t.destPath,key:t.key,srcPath:t.srcPath}).then((function(a){a.data?(e.processData=e.processData.filter((function(e){return e.key!==t.key})),e.updateProcessData(Object(c["a"])(Object(c["a"])({},t),{},{key:a.data,flag:t.flag})),e.$message({type:"success",message:a.msg})):e.$message({type:"error",message:a.msg})}))},handleClickDel:function(t){this.processData=this.processData.filter((function(e){return e.key!==t.key}))},deleteFn:function(t){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then((function(){k({cId:e.cId,delName:t.filename,isDir:t.isDir}).then((function(t){e.$message({type:"success",message:"删除成功!"}),t.data&&t.data.path&&(e.currentPath=t.data.path,e.tableData=t.data.fileInfos)})).catch((function(t){e.$notify.error({title:"删除失败",message:t.data&&t.data.mesg||t.mesg})})).finally((function(){}))})).catch((function(){})).finally((function(){}))},socketOnMessage:function(){var t=this;this.socket.onmessage=function(e){var a=JSON.parse(e.data);switch(a.type){case"Status":var s=JSON.parse(a.data).sshStatus,o=JSON.parse(a.data).msg;t.loadingText=o,"CONNECTED"===s?(t.loadingWs=!1,t.init()):"INIT"===s?t.loadingText="初始化……":"CONNECTING"===s?t.loadingText="连接中……":"ERROR"===s?(t.loadingWs=!0,t.loadingText=o):"FINISH"===s?t.$confirm("连接失败，是否重连?","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((function(){t.initSocket()})).catch((function(){t.$message({type:"info",message:"已取消重连"})})):t.socketOnClose();break;case"SftpUDInfo":var i=JSON.parse(a.data),n=i.status,r=i.msg;"FINISH"===n&&t.init(),t.processData=JSON.parse(JSON.stringify(t.processData.map((function(t){return t.key===i.key&&"FINISH"!==t.processStatus&&(t.process=i.progressSize/i.totalSize*100,t.processTxt=r,t.processStatus=n),t}))));break;default:break}}},socketOnOpen:function(){var t=this;this.socket.onopen=function(){t.socket.send(JSON.stringify({data:JSON.stringify({dataId:~~t.data.id.split("_")[0]}),type:"SftpConn"}))}},socketOnClose:function(){this.socket.onclose=function(){}},socketOnError:function(){this.socket.onerror=function(){console.log("socket,onerror")}},sendCommand:function(){this.data.content.command&&this.isFirst&&(this.isFirst=!1,this.handleChangePath(this.data.content.command))},openTab:function(t){this.$emit("openTab",t)}}},Kt=Bt,Jt=(a("4ad0"),a("8ce8"),Object(I["a"])(Kt,Tt,_t,!1,null,"3f742ca0",null)),Wt=Jt.exports,Gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",[s("el-col",{attrs:{span:10}}),s("el-col",{attrs:{span:14}})],1),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticStyle:{margin:"10px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-c-scale-to-original",staticStyle:{color:"#1682e6"}}),s("span",{staticStyle:{"font-size":"10px","font-weight":"bold"}}),s("div",{staticStyle:{}},[s("el-image",{staticStyle:{height:"150px",width:"100%"},attrs:{src:a("a647")}})],1)])])],1)],1),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-card",{staticStyle:{margin:"10px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-bell",staticStyle:{color:"red"}}),t._v(" -"),s("span",{staticStyle:{"font-size":"10px","font-weight":"bold"}},[t._v("公告")])]),s("div",{staticStyle:{height:"200px"}},[s("el-image",{staticStyle:{width:"280px",height:"120px"},attrs:{src:a("b1ab")}})],1)])],1),s("el-col",{attrs:{span:12}},[s("el-card",{staticStyle:{margin:"10px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-chat-dot-round",staticStyle:{color:"#13ce66"}}),t._v(" -"),s("span",{staticStyle:{"font-size":"10px","font-weight":"bold"}},[t._v("交流群（QQ群）")])]),s("div",{staticStyle:{height:"200px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-image",{staticStyle:{width:"160px",height:"160px"},attrs:{src:a("d6a4")}})],1),s("el-col",{attrs:{span:12}},[s("el-button",{staticStyle:{width:"150px"},attrs:{icon:"el-icon-question",type:"primary",size:"medium",plain:""},on:{click:t.questionOpen}},[t._v("问题反馈")]),s("br"),s("br"),s("el-button",{staticStyle:{width:"150px"},attrs:{icon:"el-icon-s-help",type:"success",size:"medium",plain:""},on:{click:t.sassOpen}},[t._v("官网")]),s("br"),s("br"),s("el-button",{staticStyle:{width:"150px"},attrs:{icon:"el-icon-tickets",type:"info",size:"medium",plain:""},on:{click:t.linuxGuideOpen}},[t._v("Linux手册")])],1)],1)],1)])],1)],1),s("el-dialog",{attrs:{title:"命令详情",visible:t.guideDetailView,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.guideDetailView=e}}},[s("div",[s("p",[t._v(" "+t._s(t.curGuideDetail)+" ")])])]),s("el-dialog",{attrs:{title:"版本更新",visible:t.versionView,"close-on-click-modal":t.versionData.forceUpdate,"close-on-press-escape":t.versionData.forceUpdate,"show-close":t.versionData.forceUpdate,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.versionView=e}}},[s("el-row",[s("el-col",[t._v("有新版本，"),s("el-tag",[t._v("当前版本:"+t._s(t.versionData.curVersion))]),t._v("， "),s("el-tag",{attrs:{type:"success"}},[t._v("最新版本:"+t._s(t.versionData.lastVersion))])],1)],1),s("el-row",{staticStyle:{"margin-top":"20px"}},[s("el-col",[s("el-tag",{attrs:{type:"info",effect:"dark"}},[t._v("版本更新内容：")]),s("br"),t._v(" "+t._s(t.versionData.contents)+" ")],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t._v(" 请下载新版本进行更新-- "),s("el-button",{attrs:{type:"primary"},on:{click:t.downLoadOpen}},[t._v("下载新版本")])],1)],1),s("el-dialog",{attrs:{title:"版本下载",visible:t.versionDownView,width:"600px","append-to-body":""},on:{"update:visible":function(e){t.versionDownView=e}}},[s("el-row",[s("el-col",[s("el-tag",[t._v("下载地址：")]),t._v(" https://pan.baidu.com/s/1l4J-UV-YAv5UO5Z9Wq4eww?pwd=1688"),s("br"),t._v(" （说明：版本更新不会丢失本地数据,更新前请关闭当前应用） ")],1)],1)],1)],1)},qt=[],Ht={data:function(){return{versionDownView:!1,versionData:{},versionView:!1,curGuideDetail:null,guideDetailView:!1,queryParams:{pageNum:1,pageSize:10},total:0,linuxClass:null,linuxListData:null}},created:function(){this.getVersionInfo()},methods:{getLinuxClass:function(){var t=this;M["h"]({}).then((function(e){t.linuxClass=e.data})).finally((function(){}))},getLinuxList:function(){var t=this;M["i"]({}).then((function(e){t.linuxListData=e.data})).finally((function(){}))},guideDetail:function(t){this.guideDetailView=!0,this.curGuideDetail=t.desc},getVersionInfo:function(){var t=this;this.versionData={},M["g"]({}).then((function(e){e.data&&(t.versionView=!0,t.versionData=e.data,t.versionData.forceUpdate=!e.data.foreUpdateFlag)})).finally((function(){}))},downLoadOpen:function(){this.versionDownView=!0},questionOpen:function(){return Object(tt["a"])(Object(Y["a"])().mark((function t(){return Object(Y["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!top.__TAURI__){t.next=5;break}return t.next=3,top.__TAURI__.shell.open("https://support.qq.com/product/588500");case 3:t.next=6;break;case 5:window.open("https://support.qq.com/product/588500","_blank");case 6:case"end":return t.stop()}}),t)})))()},sassOpen:function(){return Object(tt["a"])(Object(Y["a"])().mark((function t(){return Object(Y["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!top.__TAURI__){t.next=5;break}return t.next=3,top.__TAURI__.shell.open("https://serverboss.nyawei.cn/");case 3:t.next=6;break;case 5:window.open("https://serverboss.nyawei.cn/","_blank");case 6:case"end":return t.stop()}}),t)})))()},linuxGuideOpen:function(){return Object(tt["a"])(Object(Y["a"])().mark((function t(){return Object(Y["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!top.__TAURI__){t.next=5;break}return t.next=3,top.__TAURI__.shell.open("https://linux.mmoke.com/");case 3:t.next=6;break;case 5:window.open("https://linux.mmoke.com/","_blank");case 6:case"end":return t.stop()}}),t)})))()}}},Zt=Ht,Qt=Object(I["a"])(Zt,Gt,qt,!1,null,"7f8b7c5e",null),Xt=Qt.exports,Yt={components:{XtermShell:gt,IndexShow:Xt,OverviewTable:kt,UploadFile:Wt},data:function(){return{activeTabsValue:"home",editableTabs:[{name:"首页",id:"home",content:"hello world,Tab 1 content22"}]}},mounted:function(){},watch:{activeTabsValue:function(t,e){var a=this;t!==e&&this.$nextTick((function(){a.$refs.uploadFile&&a.$refs.uploadFile.$refs&&a.$refs.uploadFile.$refs.popoverProcess&&a.$refs.uploadFile.$refs.popoverProcess.doClose()}))}},methods:{addTab:function(t){var e="".concat(t.id,"_").concat(t.tabtype);if(t.tabtype&&!t.tabtype.includes("shell")&&this.editableTabs.some((function(t){return t.id===e})))this.activeTabsValue=e;else{var a=st(),s=t.tabtype&&!t.tabtype.includes("shell")?e:"".concat(e,"_").concat(a);this.editableTabs.push({id:s,name:t.name,socketURI:"ws://localhost:38888/ws?cId=".concat(a),content:t}),this.activeTabsValue=s}},removeTab:function(t){var e=this.editableTabs,a=this.activeTabsValue;a===t&&e.forEach((function(s,o){if(s.id===t){var i=e[o+1]||e[o-1];i&&(a=i.id)}})),this.activeTabsValue=a,this.editableTabs=e.filter((function(e){return e.id!==t}))}},destroyed:function(){}},te=Yt,ee=(a("3d5f"),Object(I["a"])(te,H,Z,!1,null,"719f3b71",null)),ae=ee.exports,se={name:"fairyshell",components:{SplitPane:n.a,LeftTree:q,RightTabs:ae},methods:{handleNodeClick:ot((function(t){this.$refs.rightRef&&this.$refs.rightRef.addTab(t)}),600)},mounted:function(){this.addOperLog({title:"启动ServerBoss桌面版"}),document.oncontextmenu=function(){return!1}}},oe=se,ie=(a("42c9"),Object(I["a"])(oe,s,o,!1,null,"780d57e0",null));e["default"]=ie.exports},"7c1f":function(t,e,a){},8736:function(t,e,a){"use strict";a("dd5c")},"8ce8":function(t,e,a){"use strict";a("534c")},"8f87":function(t,e,a){},a0c9:function(t,e,a){"use strict";a("52d5")},a189:function(t,e,a){},a350:function(t,e,a){"use strict";a("0259")},a647:function(t,e,a){t.exports=a.p+"static/img/show.19b027ab.png"},a85e:function(t,e,a){t.exports=a.p+"static/img/theme0.22a91364.png"},b1ab:function(t,e,a){t.exports=a.p+"static/img/gonggao.abd31e0c.png"},b68e:function(t,e,a){t.exports=a.p+"static/img/shortcuts.53b1992b.png"},d185:function(t,e,a){},d6a4:function(t,e,a){t.exports=a.p+"static/img/qqchatgroup.0526bab8.png"},dd5c:function(t,e,a){},dd99:function(t,e,a){t.exports=a.p+"static/img/theme3.431a86ce.png"},fa6a:function(t,e,a){t.exports=a.p+"static/img/theme1.e6ea2016.png"}}]);